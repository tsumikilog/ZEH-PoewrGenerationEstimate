# ZEH太陽光発電シミュレーター MVP

ZEH（Net Zero Energy House）住宅向けの太陽光発電量を簡単にシミュレーションできるWebアプリケーションです。

## 機能

- **入力フォーム**: 住所、屋根面積、屋根傾斜角度を入力
- **発電量計算**: 地域の日射量データを基に年間発電量を算出
- **ZEH基準判定**: 計算結果からZEH基準達成可能性を判定
- **結果表示**: 分かりやすいグラフィカルな結果表示

## ファイル構成

```
ZEH-PowerGenerationEstimate/
├── app.py                  # Flaskアプリケーション本体
├── templates/
│   └── index.html         # HTMLテンプレート
├── requirements.txt       # Python依存関係
└── README.md             # このファイル
```

## インストールと実行方法

### 1. 依存関係のインストール

```bash
pip install -r requirements.txt
```

または個別にインストール:

```bash
pip install Flask==3.0.0
```

### 2. アプリケーションの実行

```bash
python app.py
```

### 3. ブラウザでアクセス

```
http://localhost:5000
```

## 使用方法

1. ブラウザで `http://localhost:5000` にアクセス
2. 以下の情報を入力:
   - **住所**: 市区町村名（例: 東京都新宿区）
   - **屋根面積**: 平方メートル単位
   - **屋根傾斜角度**: 度単位（0〜90度）
3. 「計算する」ボタンをクリック
4. 年間推定発電量とZEH基準達成可能性が表示されます

## 計算ロジック

### 発電量計算式

```
年間発電量 (kWh) = 日射量係数 × 屋根面積 × システム効率 × sin(屋根傾斜角度)
```

### パラメータ

- **日射量係数**: 地域別の年間日射量（kWh/m²）
- **システム効率**: 15%（固定値）
- **角度係数**: sin(屋根傾斜角度)

### 地域別日射量係数

| 地域 | 日射量係数 (kWh/m²) |
|------|---------------------|
| 北海道・札幌 | 1200 |
| 仙台 | 1300 |
| 東京 | 1300 |
| 千葉 | 1320 |
| 横浜 | 1280 |
| 名古屋 | 1450 |
| 大阪 | 1400 |
| 京都 | 1380 |
| 神戸 | 1420 |
| 広島 | 1480 |
| 福岡 | 1450 |
| 鹿児島 | 1400 |
| 沖縄・那覇 | 1600 |
| その他 | 1350（デフォルト） |

### ZEH基準判定

- **◯ ZEH基準達成可能**: 年間発電量 ≥ 5000 kWh
- **△ ZEH基準達成困難**: 3000 kWh ≤ 年間発電量 < 5000 kWh  
- **✕ ZEH基準達成不可**: 年間発電量 < 3000 kWh

## API エンドポイント

### GET /
メインページを表示

### POST /calculate
太陽光発電量を計算

**リクエストパラメータ:**
- `address` (string): 住所
- `roof_area` (float): 屋根面積 (m²)
- `roof_angle` (float): 屋根傾斜角度 (度)

**レスポンス例:**
```json
{
  "success": true,
  "input": {
    "address": "東京都新宿区",
    "roof_area": 100.0,
    "roof_angle": 30.0
  },
  "result": {
    "annual_generation": 9750,
    "solar_irradiance": 1300,
    "system_efficiency": 15.0,
    "angle_factor": 0.5,
    "zeh_judgment": {
      "symbol": "◯",
      "text": "ZEH基準達成可能",
      "class": "good"
    }
  }
}
```

### GET /health
ヘルスチェック

## 開発情報

- **フレームワーク**: Flask 3.0.0
- **言語**: Python 3.x
- **フロントエンド**: HTML5, CSS3, Vanilla JavaScript
- **デザイン**: レスポンシブデザイン対応

## 注意事項

- これはMVP（最小実行可能製品）版です
- 実際のNEDO日射量データベースとの連携は実装されていません
- 計算は簡易的なアルゴリズムを使用しています
- 本格運用には詳細な検証と機能拡張が必要です

## ライセンス

MIT License

## 作者

Vibe Coding Team